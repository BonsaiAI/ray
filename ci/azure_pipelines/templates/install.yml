# This template includes the steps of the general install phase
# that is specified in the .travis.yml of the upstream repo.
# This is the default install phase that is reused by some of the
# parallel jobs in the build matrix of the .travis.yml file.

steps:
- bash: |
    echo Running install phase of the original travis.yml

    # Set some variables to make the system looks like Travis
    source $BUILD_SOURCESDIRECTORY/ci/azure_pipelines/templates/travis-legacy/pre-install.sh

    # Start Original script

    # The following is the original line but we are desabling Serve tests
    # . ./ci/travis/ci.sh init RAY_CI_SERVE_AFFECTED,RAY_CI_TUNE_AFFECTED,RAY_CI_PYTHON_AFFECTED
    . ./ci/travis/ci.sh init RAY_CI_TUNE_AFFECTED,RAY_CI_PYTHON_AFFECTED
    . ./ci/travis/ci.sh build

    # End Original script

    exit 0
  env:
    PYTHONWARNINGS: 'ignore'
    RAY_DEFAULT_BUILD: 1
    RAY_CYTHON_EXAMPLES: 1
    TRAVIS: 'true'
  displayName: 'Run original travis install phase'
  timeoutInMinutes: 120
